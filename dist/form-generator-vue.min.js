var FormGeneratorVue=function(e){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,n,t,r,o,i,l){try{var s=e[i](l),u=s.value}catch(e){return void t(e)}s.done?n(u):Promise.resolve(u).then(r,o)}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){if(e){if("string"==typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,n):void 0}}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function a(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=s(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==t.return||t.return()}finally{if(u)throw i}}}}var d={isUndef:function(e){return void 0===e},isObjNotArr:function(e){return d.isArr(e)?e.every((function(e){return d.isObj(e)&&!d.isArr(e)})):d.isObj(e)},isObj:function(e){return d.isArr(e)?e.every((function(e){return"object"===n(e)})):"object"===n(e)},isArr:function(e){return Array.isArray(e)},isFunc:function(e){return"function"==typeof e},isBool:function(e){return"boolean"==typeof e},isStr:function(e){return"string"==typeof e},throwError:function(e){throw new Error(e)},warn:function(e){console.warn(e)},hasProperty:function(e,n){return d.isArr(e)?e.every((function(e){return e in n})):e in n},handleFunc:function(e,n){if(d.isFunc(e))return e(n)},handleFuncOrBool:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,t=Boolean(e);return d.isFunc(e)&&(t=e(n)),t},debounce:function(e){var n;return function(t,r){clearTimeout(n),n=setTimeout((function(){clearTimeout(n),e(r)}),t)}}},c={form:"fgv-form",header:"fgv-header",body:"fgv-body",footer:"fgv-footer",row:"fgv-row",rowContainer:"fgv-row-container",colContainer:"fgv-col-container",col:"fgv-col"},f={header:"header",footer:"footer",beforeComponent:function(e){return"before-".concat(e)},afterComponent:function(e){return"after-".concat(e)},beforeRow:"before-row",rowStart:"row-start",rowEnd:"row-end",afterRow:"after-row",beforeCol:"before-col",afterCol:"after-col"},v="fields",m="fields",p="errors",h="activeValidation",b="vOn",y={text:"text",number:"number"},S={required:"required",disabled:"disabled",hidden:"hidden"},w="rules",_={computed:{SLOT:function(){return f},CLASS:function(){return c},UTILS:function(){return d}}};function O(e,n,t,r,o,i,l,s,u,a){"boolean"!=typeof l&&(u=s,s=l,l=!1);const d="function"==typeof t?t.options:t;let c;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),r&&(d._scopeId=r),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=c):n&&(c=l?function(e){n.call(this,a(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,s(e))}),c)if(d.functional){const e=d.render;d.render=function(n,t){return c.call(t),e(n,t)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,c):[c]}return t}var g=O({render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t(e.componentName(e.schema.form),e._g(e._b({tag:"component",class:[e.CLASS.form],model:{value:e.form,callback:function(n){e.form=n},expression:"form"}},"component",e.componentProps(e.schema.form,{form:e.schema.form}),!1),e.componentEvents(e.schema.form,{form:e.schema.form})),[t("div",{class:[e.CLASS.header]},[e._t(e.SLOT.header)],2),e._v(" "),t("div",{class:[e.CLASS.body]},[e._l(e.allFieldsArray,(function(n,r){return[e.showRow(n)?t("Row",{key:r,attrs:{models:e.slotProps(n),classes:e.classes}},[e.UTILS.isArr(n)?e._l(n,(function(r){return[e.showCol(r)?t("Column",{key:r.model,attrs:{models:e.slotProps(n),classes:e.classes}},[t(e.componentName(r),e._g(e._b({tag:"component",model:{value:e.fields[r.model],callback:function(n){e.$set(e.fields,r.model,n)},expression:"fields[subConf.model]"}},"component",e.componentProps(r,{field:!0}),!1),e.componentEvents(r)),[e._t(r.model)],2)],1):e._e()]})):[e.showCol(n)?t("Column",{key:n.model,attrs:{models:e.slotProps(n),classes:e.classes}},[t(e.componentName(n),e._g(e._b({tag:"component",model:{value:e.fields[n.model],callback:function(t){e.$set(e.fields,n.model,t)},expression:"fields[conf.model]"}},"component",e.componentProps(n,{field:!0}),!1),e.componentEvents(n)),[e._t(n.model)],2)],1):e._e()]],2):e._e()]}))],2),e._v(" "),t("div",{class:e.CLASS.footer},[e._t(e.SLOT.footer)],2)])},staticRenderFns:[]},void 0,{components:{Row:O({render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:[e.CLASS.rowContainer]},[e._t(e.SLOT.beforeRow,null,{models:e.models}),e._v(" "),t("div",{key:e.i,class:[e.CLASS.row,e.classes.row]},[e._t(e.SLOT.rowStart,null,{models:e.models}),e._v(" "),e._t("default"),e._v(" "),e._t(e.SLOT.rowEnd,null,{models:e.models})],2),e._v(" "),e._t(e.SLOT.afterRow,null,{models:e.models})],2)},staticRenderFns:[]},void 0,{mixins:[_],props:{models:{type:Array,required:!1,default:function(){return[]}},classes:{type:Object,required:!1,default:function(){return{}}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Column:O({render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:[e.CLASS.colContainer]},[e._t(e.SLOT.beforeCol,null,{models:e.models}),e._v(" "),t("div",{class:[e.CLASS.col,e.models[0],e.classes.col]},[e._t(e.SLOT.beforeComponent(e.models[0])),e._v(" "),e._t("default"),e._v(" "),e._t(e.SLOT.afterComponent(e.models[0]))],2),e._v(" "),e._t(e.SLOT.afterCol,null,{models:e.models})],2)},staticRenderFns:[]},void 0,{mixins:[_],props:{models:{type:Array,required:!1,default:function(){return[]}},classes:{type:Object,required:!1,default:function(){return{}}}}},void 0,!1,void 0,!1,void 0,void 0,void 0)},mixins:[{props:{value:{type:Object,default:null,required:!1},onSubmit:{type:Function,required:!1,default:void 0},components:{type:Array,required:!1,default:function(){return[]}},disabled:{type:Boolean,required:!1,default:!1},schema:{type:Object,default:function(){return{}}},classes:{type:Object,required:!1,default:function(){return{}}},onSubmitFail:{type:Function,required:!1,default:void 0},activeValidation:{type:Boolean,required:!1,default:!0},logs:{type:Boolean,required:!1,default:!1}}},_],emits:["input"],data:function(){var e,n,t=this,r={},o={},i=function(e){var n,i,l,s;r[e]=(null===(n=t.value)||void 0===n||null===(i=n[m])||void 0===i?void 0:i[e])||"",o[e]=(null===(l=t.value)||void 0===l||null===(s=l[p])||void 0===s?void 0:s[e])||""},l=a(this.schema[v]);try{for(l.s();!(n=l.n()).done;){var s=n.value;if(d.isArr(s)){var u,c=a(s);try{for(c.s();!(u=c.n()).done;){i(u.value.model)}}catch(e){c.e(e)}finally{c.f()}break}i(s.model)}}catch(e){l.e(e)}finally{l.f()}return{form:null===(e=this.value)||void 0===e?void 0:e.form,fields:r,errors:o,submit:!1}},computed:{globalAv:function(){return this.activeValidation||!1},allFieldsArray:function(){var e;return d.isArr(null===(e=this.schema)||void 0===e?void 0:e[v])?this.schema[v]:[]},allFieldsFlatObj:function(){var e,n={},t=a(this.allFieldsArray);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(d.isArr(r)){var o,i=a(r);try{for(i.s();!(o=i.n()).done;){var l=o.value;n[l.model]=l}}catch(e){i.e(e)}finally{i.f()}break}n[r.model]=r}}catch(e){t.e(e)}finally{t.f()}return n}},watch:{disabled:{handler:function(){this.removeAllErrors()}},value:{handler:function(){for(var e in null===(n=this.value)||void 0===n?void 0:n[m]){var n,t,r,o,i;this.fields[e]=null===(t=this.value)||void 0===t||null===(r=t[m])||void 0===r?void 0:r[e],this.errors[e]=null===(o=this.value)||void 0===o||null===(i=o[p])||void 0===i?void 0:i[e]}},deep:!0},fields:{handler:function(){this.emitData()},deep:!0,immediate:!0}},created:function(){var e=this,t=function(t){var r=e.fieldConf(t);e.$watch("fields.".concat(t),(function(t,o){e.typeCoercion(r),t==o&&n(t)!==n(o)||e.validateField(r)}),{deep:!0})};for(var r in this.fields)t(r)},methods:{logger:function(e){var n;this.logs&&(n=console).log.apply(n,l(e))},emitData:function(){var e;this.$emit("input",(r(e={form:this.form},m,i({},this.fields)),r(e,p,i({},this.errors)),e))},resetForm:function(){this.submit=!1},showRow:function(e){var n=this;return d.isArr(e)?e.length&&e.some((function(e){return n.showCol(e)})):this.showCol(e)},showCol:function(e){return this.componentName(e)&&!this.fieldHidden(e)},slotProps:function(e){return d.isArr(e)?e.map((function(e){return e.model})):[e.model]},componentProps:function(e){var n,t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.form,l=r.field,s=this.componentName(e,r),u=this.componentData(s),a=i(i({},null==e?void 0:e.vBind),{},{disabled:Boolean(this.disabled||(null==e?void 0:e.disabled))});o&&(a.is=(null==e||null===(n=e.vBind)||void 0===n?void 0:n.is)||"form");l&&((null==u?void 0:u.errorProp)&&(a[u.errorProp]=this.errors[e.model]),a.type=(null==e||null===(t=e.vBind)||void 0===t?void 0:t.type)||y.text);return a},removeAllErrors:function(){for(var e in this.errors)this.errors[e]=""},setError:function(e,n){this.errors[e]=n},componentData:function(e){return this.components.find((function(n){return(null==n?void 0:n.name)===e}))},typeCoercion:function(e){var n;Number.isNaN(Number(this.fields[e.model]))&&(null==e||null===(n=e.vBind)||void 0===n?void 0:n.type)===y.number&&this.fields[e.model]&&(this.fields[e.model]=Number(this.fields[e.model]))},componentEvents:function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.form,o=(null==e?void 0:e[b])||{};r&&(o.submit=(null==e||null===(n=e.vOn)||void 0===n?void 0:n.submit)||this.handleSubmit);return o},componentName:function(e){var n,t;if(null==e||null===(n=e.vBind)||void 0===n?void 0:n.is)return null==e||null===(t=e.vBind)||void 0===t?void 0:t.is;var r=this.components.find((function(n){var t;return n.types.includes(null==e||null===(t=e.vBind)||void 0===t?void 0:t.type)}));return null==r?void 0:r.name},fieldConf:function(e){return this.allFieldsFlatObj[e]},fieldHidden:function(e){var n;return!(!(null==e?void 0:e.vBind)||!(S.hidden in e.vBind))&&(null===(n=e.vBind)||void 0===n?void 0:n[S.hidden])},runFieldRules:function(e,n){var t;if(d.isArr(e)){var r,o=a(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(t=i,d.isFunc(i)&&(t=d.handleFunc(i,n)),d.isStr(t))break}}catch(e){o.e(e)}finally{o.f()}}return t},validateField:function(e){var n=this.submit||(null==e?void 0:e[h])||this.globalAv?this.runFieldRules(null==e?void 0:e[w],this.fields[e.model]):"";return this.setError(e.model,n),n},validateForm:function(){var e={};for(var n in this.allFieldsFlatObj){var t=this.allFieldsFlatObj[n],r=this.validateField(t);e[t.model]={validationSuccess:!r,schema:t}}var o=Object.keys(e).find((function(n){return!e[n].validationSuccess}));return{fieldsStatus:e,submitFail:o}},handleSubmit:function(e){var n,r=this;return(n=regeneratorRuntime.mark((function n(){var t,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),r.submit=!0,t=r.validateForm(),o=t.fieldsStatus,i=t.submitFail,r.logger(["[SUBMIT ".concat(i?"FAIL":"SUCCESS","]"),o]),!i){n.next=10;break}if(r.resetForm(),!d.isFunc(r.onSubmitFail)){n.next=9;break}return n.next=9,r.onSubmitFail();case 9:return n.abrupt("return");case 10:if(!d.isFunc(r.onSubmit)){n.next=14;break}return n.next=13,r.onSubmit();case 13:r.resetForm();case 14:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(o,i){var l=n.apply(e,r);function s(e){t(l,o,i,s,u,"next",e)}function u(e){t(l,o,i,s,u,"throw",e)}s(void 0)}))})()}}},void 0,!1,void 0,!1,void 0,void 0,void 0),C=function(e){C.installed||(C.installed=!0,e.component("FormGeneratorVue",g))},F={install:C},A=null;return"undefined"!=typeof window?A=window.Vue:"undefined"!=typeof global&&(A=global.Vue),A&&A.use(F),g.install=C,e.default=g,e}({});