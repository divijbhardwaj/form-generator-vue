var FormGeneratorVue=function(e){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function t(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.push.apply(n,t)}return n}function r(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?t(Object(r),!0).forEach((function(o){n(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,o){if(e){if("string"==typeof e)return s(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,o):void 0}}function s(e,o){(null==o||o>e.length)&&(o=e.length);for(var n=0,t=new Array(o);n<o;n++)t[n]=e[n];return t}function a(e,o){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||o&&e&&"number"==typeof e.length){n&&(e=n);var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,o,n,t,r,i,l,s,a,u){"boolean"!=typeof l&&(a=s,s=l,l=!1);const d="function"==typeof n?n.options:n;let c;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,r&&(d.functional=!0)),t&&(d._scopeId=t),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=c):o&&(c=l?function(e){o.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){o.call(this,s(e))}),c)if(d.functional){const e=d.render;d.render=function(o,n){return c.call(n),e(o,n)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,c):[c]}return n}var d=u({render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]},void 0,{},void 0,!1,void 0,!1,void 0,void 0,void 0),c={isUndef:function(e){return void 0===e},isObjNotArr:function(e){return c.isArr(e)?e.every((function(e){return c.isObj(e)&&!c.isArr(e)})):c.isObj(e)},isObj:function(e){return c.isArr(e)?e.every((function(e){return"object"===o(e)})):"object"===o(e)},isArr:function(e){return Array.isArray(e)},isFunc:function(e){return"function"==typeof e},isBool:function(e){return"boolean"==typeof e},isStr:function(e){return"string"==typeof e},throwError:function(e){throw new Error(e)},hasProperty:function(e,o){return c.isArr(e)?e.every((function(e){return e in o})):e in o},handleFunc:function(e,o){if(c.isFunc(e))return e(o)},handleFuncOrBool:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Boolean(e);return c.isFunc(e)&&(n=e(o)),n},debounce:function(e){var o;return function(n,t){clearTimeout(o),o=setTimeout((function(){clearTimeout(o),e(t)}),n)}},logger:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.show,t=o.warn;if(n){var r,l;if(t)return void(l=console).warn.apply(l,i(e));(r=console).log.apply(r,i(e))}}},f=function(e){return e&&!["boolean"].includes(o(e))||!e&&["string","boolean"].includes(o(e))},v={form:"fgv-form",body:"fgv-body",row:"fgv-row",rowContainer:"fgv-row-container",colContainer:"fgv-col-container",col:"fgv-col"},m={header:"header",footer:"footer",beforeComponent:function(e){return"before-".concat(e)},afterComponent:function(e){return"after-".concat(e)},beforeRow:"before-row",rowStart:"row-start",rowEnd:"row-end",afterRow:"after-row",beforeCol:"before-col",afterCol:"after-col"},p="fields",h="fields",b="errors",y="activeValidation",S="on",C={text:"text",number:"number"},_={required:"required",disabled:"disabled",hidden:"hidden"},w=u({render:function(){var e=this,o=e.$createElement,n=e._self._c||o;return n(e.componentName(e.schema.form),e._g(e._b({tag:"component",class:e.classes([e.CLASS.form]),model:{value:e.form,callback:function(o){e.form=o},expression:"form"}},"component",e.componentProps(e.schema.form,{form:!0}),!1),e.componentEvents(e.schema.form,{form:!0})),[e._t(e.SLOT.header),e._v(" "),n("Body",{class:e.classes([e.CLASS.body])},[e._l(e.schema.fields,(function(o,t){return[e.showRow(o)?n("RowContainer",{key:t,class:e.classes([e.CLASS.rowContainer,e.CLASS.rowContainer+"-"+(t+1)])},[e._t(e.SLOT.beforeRow,null,{models:e.slotProps(o)}),e._v(" "),n("Row",{class:e.classes([e.CLASS.row,e.CLASS.row+"-"+(t+1)])},[e._t(e.SLOT.rowStart,null,{models:e.slotProps(o)}),e._v(" "),e.UTILS.isArr(o)?e._l(o,(function(o){return[e.showCol(o)?n("ColumnContainer",{key:o.model,class:e.classes([e.CLASS.colContainer,e.CLASS.colContainer+"-"+o.model])},[e._t(e.SLOT.beforeCol,null,{models:e.slotProps(o)}),e._v(" "),n("Column",{class:e.classes([e.CLASS.col,e.CLASS.col+"-"+o.model,o.model])},[e._t(e.SLOT.beforeComponent(o.model)),e._v(" "),n(e.componentName(o),e._g(e._b({tag:"component",model:{value:e.fields[o.model],callback:function(n){e.$set(e.fields,o.model,n)},expression:"fields[subConf.model]"}},"component",e.componentProps(o,{field:!0}),!1),e.componentEvents(o)),[e._t(o.model)],2),e._v(" "),e._t(e.SLOT.afterComponent(o.model))],2),e._v(" "),e._t(e.SLOT.afterCol,null,{models:e.slotProps(o)})],2):e._e()]})):[e.showCol(o)?n("ColumnContainer",{key:o.model,class:e.classes([e.CLASS.colContainer,e.CLASS.colContainer+"-"+o.model])},[e._t(e.SLOT.beforeCol,null,{models:e.slotProps(o)}),e._v(" "),n("Column",{class:e.classes([e.CLASS.col,e.CLASS.col+"-"+o.model,o.model])},[e._t(e.SLOT.beforeComponent(o.model)),e._v(" "),n(e.componentName(o),e._g(e._b({tag:"component",model:{value:e.fields[o.model],callback:function(n){e.$set(e.fields,o.model,n)},expression:"fields[conf.model]"}},"component",e.componentProps(o,{field:!0}),!1),e.componentEvents(o)),[e._t(o.model)],2),e._v(" "),e._t(e.SLOT.afterComponent(o.model))],2),e._v(" "),e._t(e.SLOT.afterCol,null,{models:e.slotProps(o)})],2):e._e()],e._v(" "),e._t(e.SLOT.rowEnd,null,{models:e.slotProps(o)})],2),e._v(" "),e._t(e.SLOT.afterRow,null,{models:e.slotProps(o)})],2):e._e()]}))],2),e._v(" "),e._t(e.SLOT.footer)],2)},staticRenderFns:[]},void 0,{components:{Body:d,RowContainer:d,Row:d,ColumnContainer:d,Column:d},mixins:[{props:{value:{type:Object,default:null,required:!1},schema:{type:Object,default:function(){return{}}}}}],emits:["input"],data:function(){var e,o,n=this,t=null===(e=this.value)||void 0===e?void 0:e.form,r={},i={},l=function(e){var o,t,l,s;r[e]=(null===(o=n.value)||void 0===o||null===(t=o[h])||void 0===t?void 0:t[e])||"",i[e]=(null===(l=n.value)||void 0===l||null===(s=l[b])||void 0===s?void 0:s[e])||""},s=a(this.schema[p]);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(c.isArr(u)){var d,f=a(u);try{for(f.s();!(d=f.n()).done;){l(d.value.model)}}catch(e){f.e(e)}finally{f.f()}}else l(u.model)}}catch(e){s.e(e)}finally{s.f()}return{form:t,fields:r,errors:i}},computed:{SLOT:function(){return m},CLASS:function(){return v},UTILS:function(){return c},fieldsFlat:function(){var e,o={},n=a(this.schema[p]);try{for(n.s();!(e=n.n()).done;){var t=e.value;if(c.isArr(t)){var r,i=a(t);try{for(i.s();!(r=i.n()).done;){var l=r.value;o[l.model]=l}}catch(e){i.e(e)}finally{i.f()}}else o[t.model]=t}}catch(e){n.e(e)}finally{n.f()}return o}},watch:{value:{handler:function(){for(var e in null===(o=this.value)||void 0===o?void 0:o[h]){var o,n,t,r,i;this.fields[e]=null===(n=this.value)||void 0===n||null===(t=n[h])||void 0===t?void 0:t[e],this.errors[e]=null===(r=this.value)||void 0===r||null===(i=r[b])||void 0===i?void 0:i[e]}},deep:!0},form:{handler:"emitData",deep:!0,immediate:!0},fields:{handler:"emitData",deep:!0,immediate:!0},errors:{handler:"emitData",deep:!0,immediate:!0}},created:function(){var e=this,n=function(n){var t=e.getFieldConf(n);e.$watch("fields.".concat(n),(function(n,r){e.typeCoercion(t),n==r&&o(n)!==o(r)||e.validateField(t)}),{deep:!0})};for(var t in this.fields)n(t)},mounted:function(){var e,o;(null==this||null===(e=this.schema)||void 0===e||null===(o=e.options)||void 0===o?void 0:o.onLoadValidation)&&this.validate()},methods:{classes:function(e){var o=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.reduce((function(e,n){var t,r;if(null==o||null===(t=o.schema)||void 0===t||null===(r=t.class)||void 0===r?void 0:r[n]){e.push.apply(e,i(o.schema.class[n]));var l=o.schema.class[n].filter((function(e){var n;return Object.keys(null==o||null===(n=o.schema)||void 0===n?void 0:n.class).includes(e)}));l.length&&e.push.apply(e,i(o.classes(l,!0)))}return e}),n?[]:i(e))},emitData:function(){var e,o,t,i,l,s=this,a=c.isStr(null==this||null===(e=this.schema)||void 0===e||null===(o=e.form)||void 0===o?void 0:o.model)?null==this||null===(t=this.schema)||void 0===t||null===(i=t.form)||void 0===i?void 0:i.model:void 0,u=!Object.keys(this.errors).find((function(e){return s.errors[e]&&!s.fieldHidden(s.fieldsFlat[e])}));this.$emit("input",r(r({},a?n({},a,this.form):{}),{},(n(l={valid:u},h,this.fields),n(l,b,this.errors),l)))},showRow:function(e){var o=this;return c.isArr(e)?e.length&&e.some((function(e){return o.showCol(e)})):this.showCol(e)},showCol:function(e){return this.componentName(e)&&!this.fieldHidden(e)},slotProps:function(e){return c.isArr(e)?e.map((function(e){return e.model})):[e.model]},componentProps:function(e){var o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.form,i=r({},null==e?void 0:e.props);t&&(i.is=(null==e||null===(o=e.props)||void 0===o?void 0:o.is)||"form");return i},resetValidation:function(){for(var e in this.errors)this.errors[e]=""},reset:function(){for(var e in this.fields)this.fields[e]="",this.errors[e]=""},setError:function(e,o){this.errors[e]=f(o)?o:""},typeCoercion:function(e){var o;if(this.fields[e.model]&&(null==e||null===(o=e.props)||void 0===o?void 0:o.type)===C.number){if(!Number.isNaN(this.fields[e.model]))return;this.fields[e.model]=Number(this.fields[e.model])}},componentEvents:function(e){var o,n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.form,i=(null==e?void 0:e[S])||{};r&&(i.submit=(null==e||null===(o=e.on)||void 0===o?void 0:o.submit)||function(e){var o,t;null==e||e.preventDefault(),c.logger(["submit handler not present.\n"],{warn:!0,show:null==n||null===(o=n.schema)||void 0===o||null===(t=o.options)||void 0===t?void 0:t.logs})});return i},componentName:function(e){var o;return(null==e||null===(o=e.props)||void 0===o?void 0:o.is)||(null==e?void 0:e.tag)},getFieldConf:function(e){return this.fieldsFlat[e]},fieldHidden:function(e){var o;return!(!(null==e?void 0:e.props)||!(_.hidden in e.props))&&Boolean(null===(o=e.props)||void 0===o?void 0:o[_.hidden])},runFieldRules:function(e,o){var n;if(c.isArr(o)){var t,r=a(o);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(n=i,c.isFunc(i)&&(n=i(e)),f(n))break}}catch(n){r.e(n)}finally{r.f()}}return c.isFunc(o)&&(n=o(e)),n},validateField:function(e,o){var n,t,r,i,l=y in e?null==e?void 0:e[y]:null==this||null===(n=this.schema)||void 0===n||null===(t=n.options)||void 0===t?void 0:t.activeValidation,s=(o||l)&&this.runFieldRules(this.fields[e.model],null==this||null===(r=this.schema)||void 0===r||null===(i=r.rules)||void 0===i?void 0:i[e.model]);this.setError(e.model,s)},validate:function(){for(var e in this.fields){var o;this.validateField(null===(o=this.fieldsFlat)||void 0===o?void 0:o[e],!0)}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),g=function(e){g.installed||(g.installed=!0,e.component("FormGeneratorVue",w))},O={install:g},A=null;return"undefined"!=typeof window?A=window.Vue:"undefined"!=typeof global&&(A=global.Vue),A&&A.use(O),w.install=g,e.default=w,e}({});