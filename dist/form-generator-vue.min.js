var FormGeneratorVue=function(n){"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function r(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function t(n){return function(n){if(Array.isArray(n))return i(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||o(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,e){if(n){if("string"==typeof n)return i(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(n,e):void 0}}function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function l(n,e){var r;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(r=o(n))||e&&n&&"number"==typeof n.length){r&&(n=r);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return u=n.done,n},e:function(n){a=!0,l=n},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw l}}}}var u={isUndef:function(n){return void 0===n},isObjOnly:function(n){return u.isArr(n)?n.every((function(n){return u.isObj(n)&&!u.isArr(n)})):u.isObj(n)},isObj:function(n){return u.isArr(n)?n.every((function(n){return"object"===e(n)})):"object"===e(n)},isArr:function(n){return Array.isArray(n)},isFunc:function(n){return"function"==typeof n},isBool:function(n){return"boolean"==typeof n},isStr:function(n){return"string"==typeof n},throwError:function(n){throw new Error(n)},hasProperty:function(n,e){return u.isArr(n)?n.every((function(n){return n in e})):n in e},handleFunc:function(n,e){if(u.isFunc(n))return n(e)},handleFuncOrBool:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=Boolean(n);return u.isFunc(n)&&(r=n(e)),r},debounce:function(n){var e;return function(r,t){clearTimeout(e),e=setTimeout((function(){clearTimeout(e),n(t)}),r)}},logger:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.show,o=e.warn;if(r){var i,l;if(o)return void(l=console).warn.apply(l,t(n));(i=console).log.apply(i,t(n))}}},a={form:"fgv-form",body:"fgv-body",row:"fgv-row",rowContainer:"fgv-row-container",colContainer:"fgv-col-container",col:"fgv-col"},s={header:"header",footer:"footer",beforeComponent:function(n){return"before-".concat(n)},afterComponent:function(n){return"after-".concat(n)},beforeRow:"before-row",rowStart:"row-start",rowEnd:"row-end",afterRow:"after-row",beforeCol:"before-col",afterCol:"after-col"},d="fields",f="fields",c="errors",v="activeValidation",h={text:"text",number:"number"},m={required:"required",disabled:"disabled",hidden:"hidden"};function p(n,e,r,t,o,i,l,u,a,s){"boolean"!=typeof l&&(a=u,u=l,l=!1);const d="function"==typeof r?r.options:r;let f;if(n&&n.render&&(d.render=n.render,d.staticRenderFns=n.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),t&&(d._scopeId=t),i?(f=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),e&&e.call(this,a(n)),n&&n._registeredComponents&&n._registeredComponents.add(i)},d._ssrRegister=f):e&&(f=l?function(n){e.call(this,s(n,this.$root.$options.shadowRoot))}:function(n){e.call(this,u(n))}),f)if(d.functional){const n=d.render;d.render=function(e,r){return f.call(r),n(e,r)}}else{const n=d.beforeCreate;d.beforeCreate=n?[].concat(n,f):[f]}return r}var y=p({},void 0,{mixins:[{props:{value:{type:Object,default:null,required:!1},schema:{type:Object,default:function(){return{}}}}}],emits:["input"],data:function(){var n=function(n){var e={};return function n(r){var t;(null==r?void 0:r.model)&&(e[u.isArr(r)&&(null===(t=r.model)||void 0===t?void 0:t[0])||r.model]={value:"",error:""});(null==r?void 0:r.children)&&(null==r||r.children.forEach((function(e){return n(e)})))}(n),e}(this.schema);return console.log("model is",n),{model:n}},computed:{SLOT:function(){return s},CLASS:function(){return a},UTILS:function(){return u},fieldsFlat:function(){var n,e={},r=l(this.schema[d]);try{for(r.s();!(n=r.n()).done;){var t=n.value;if(u.isArr(t)){var o,i=l(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;e[a.model]=a}}catch(n){i.e(n)}finally{i.f()}}else e[t.model]=t}}catch(n){r.e(n)}finally{r.f()}return e}},watch:{value:{handler:function(){for(var n in null===(e=this.value)||void 0===e?void 0:e[f]){var e,r,t,o,i;this.fields[n]=null===(r=this.value)||void 0===r||null===(t=r[f])||void 0===t?void 0:t[n],this.errors[n]=null===(o=this.value)||void 0===o||null===(i=o[c])||void 0===i?void 0:i[n]}},deep:!0},fields:{handler:"emitData",deep:!0,immediate:!0},errors:{handler:"emitData",deep:!0,immediate:!0}},created:function(){var n=this,r=function(r){var t=n.getFieldConf(r);n.$watch("fields.".concat(r),(function(r,o){n.typeCoercion(t),r==o&&e(r)!==e(o)||n.validateField(t)}),{deep:!0})};for(var t in this.fields)r(t)},mounted:function(){var n,e;(null==this||null===(n=this.schema)||void 0===n||null===(e=n.options)||void 0===e?void 0:e.onLoadValidation)&&this.validate()},methods:{classes:function(n){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.reduce((function(n,r){var o,i;if(null==e||null===(o=e.schema)||void 0===o||null===(i=o.class)||void 0===i?void 0:i[r]){n.push.apply(n,t(e.schema.class[r]));var l=e.schema.class[r].filter((function(n){var r;return Object.keys(null==e||null===(r=e.schema)||void 0===r?void 0:r.class).includes(n)}));l.length&&n.push.apply(n,t(e.classes(l,!0)))}return n}),r?[]:t(n))},emitData:function(){var n,e=this,t=!Object.keys(this.errors).find((function(n){return e.errors[n]&&!e.fieldHidden(e.fieldsFlat[n])}));this.$emit("input",(r(n={valid:t},f,this.fields),r(n,c,this.errors),n))},resetValidation:function(){for(var n in this.errors)this.errors[n]=""},reset:function(){for(var n in this.fields)this.fields[n]="",this.errors[n]=""},canSetErr:function(n){return n&&!["boolean"].includes(e(n))||!n&&["string","boolean"].includes(e(n))},setError:function(n,e){this.errors[n]=this.canSetErr(e)?e:""},typeCoercion:function(n){var e;if(this.fields[n.model]&&(null==n||null===(e=n.props)||void 0===e?void 0:e.type)===h.number){if(!Number.isNaN(this.fields[n.model]))return;this.fields[n.model]=Number(this.fields[n.model])}},getFieldConf:function(n){return this.fieldsFlat[n]},fieldHidden:function(n){var e;return!(!(null==n?void 0:n.props)||!(m.hidden in n.props))&&Boolean(null===(e=n.props)||void 0===e?void 0:e[m.hidden])},runFieldRules:function(n,e){var r;if(u.isArr(e)){var t,o=l(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(r=i,u.isFunc(i)&&(r=i(n)),this.canSetErr(r))break}}catch(r){o.e(r)}finally{o.f()}}return u.isFunc(e)&&(r=e(n)),r},validateField:function(n,e){var r,t,o,i,l=v in n?null==n?void 0:n[v]:null==this||null===(r=this.schema)||void 0===r||null===(t=r.options)||void 0===t?void 0:t.activeValidation,u=(e||l)&&this.runFieldRules(this.fields[n.model],null==this||null===(o=this.schema)||void 0===o||null===(i=o.rules)||void 0===i?void 0:i[n.model]);this.setError(n.model,u)},validate:function(){for(var n in this.fields){var e;this.validateField(null===(e=this.fieldsFlat)||void 0===e?void 0:e[n],!0)}}},render:function(n){var e;var r=function e(r){return r&&u.isArr(r)?r.map((function(r){var t=r.tag,o=r.data,i=r.children;return n(t,o,e(i))})):[]}(null==this||null===(e=this.schema)||void 0===e?void 0:e.fields);return n("form",{},r)}},void 0,void 0,void 0,!1,void 0,void 0,void 0),b=function(n){b.installed||(b.installed=!0,n.component("FormGeneratorVue",y))},w={install:b},g=null;return"undefined"!=typeof window?g=window.Vue:"undefined"!=typeof global&&(g=global.Vue),g&&g.use(w),y.install=b,n.default=y,n}({});