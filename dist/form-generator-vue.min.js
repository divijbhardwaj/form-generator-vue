var FormGeneratorVue=function(e){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,o,n,t,r,i,l){try{var s=e[i](l),u=s.value}catch(e){return void n(e)}s.done?o(u):Promise.resolve(u).then(t,r)}function t(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function r(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?r(Object(n),!0).forEach((function(o){t(e,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))}))}return e}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,o){if(e){if("string"==typeof e)return u(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,o):void 0}}function u(e,o){(null==o||o>e.length)&&(o=e.length);for(var n=0,t=new Array(o);n<o;n++)t[n]=e[n];return t}function a(e,o){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||o&&e&&"number"==typeof e.length){n&&(e=n);var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw i}}}}var d={props:{value:{type:Object,default:null,required:!1},onSubmit:{type:Function,required:!1,default:void 0},components:{type:Array,required:!1,default:function(){return[]}},disabled:{type:Boolean,required:!1,default:!1},schema:{type:Object,default:function(){return{}}},classes:{type:Object,required:!1,default:function(){return{}}},onSubmitFail:{type:Function,required:!1,default:void 0},activeValidation:{type:Boolean,required:!1,default:!0},logs:{type:Boolean,required:!1,default:!1}}},c={isUndef:function(e){return void 0===e},isObjNotArr:function(e){return c.isArr(e)?e.every((function(e){return c.isObj(e)&&!c.isArr(e)})):c.isObj(e)},isObj:function(e){return c.isArr(e)?e.every((function(e){return"object"===o(e)})):"object"===o(e)},isArr:function(e){return Array.isArray(e)},isFunc:function(e){return"function"==typeof e},isBool:function(e){return"boolean"==typeof e},isStr:function(e){return"string"==typeof e},throwError:function(e){throw new Error(e)},warn:function(e){console.warn(e)},hasProperty:function(e,o){return c.isArr(e)?e.every((function(e){return e in o})):e in o},handleFunc:function(e,o){if(c.isFunc(e))return e(o)},handleFuncOrBool:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Boolean(e);return c.isFunc(e)&&(n=e(o)),n},debounce:function(e){var o;return function(n,t){clearTimeout(o),o=setTimeout((function(){clearTimeout(o),e(t)}),n)}}},f={form:"fgv-form",header:"fgv-form__header",body:"fgv-form__body",footer:"fgv-form__footer",row:"fgv-form__body__row",colContainer:"fgv-form__body__row__col-container",col:"fgv-form__body__row__col-container__col"},v={header:"header",footer:"footer",beforeComponent:function(e){return"before-".concat(e)},afterComponent:function(e){return"after-".concat(e)},beforeRow:"before-row",rowStart:"row-start",rowEnd:"row-end",afterRow:"after-row",beforeCol:"before-col",afterCol:"after-col"},m="fields",h="fields",p="errors",b="activeValidation",y="vOn",_={text:"text",number:"number"},S={required:"required",disabled:"disabled",hidden:"hidden"},w="rules";function O(e,o,n,t,r,i,l,s,u,a){"boolean"!=typeof l&&(u=s,s=l,l=!1);const d="function"==typeof n?n.options:n;let c;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,r&&(d.functional=!0)),t&&(d._scopeId=t),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=c):o&&(c=l?function(e){o.call(this,a(e,this.$root.$options.shadowRoot))}:function(e){o.call(this,s(e))}),c)if(d.functional){const e=d.render;d.render=function(o,n){return c.call(n),e(o,n)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,c):[c]}return n}var g=O({render:function(){var e=this,o=e.$createElement,n=e._self._c||o;return n(e.componentName(e.schema.form),e._g(e._b({tag:"component",class:[e.CLASS.form],model:{value:e.form,callback:function(o){e.form=o},expression:"form"}},"component",e.componentProps(e.schema.form,{form:e.schema.form}),!1),e.componentEvents(e.schema.form,{form:e.schema.form})),[n("div",{class:[e.CLASS.header]},[e._t(e.SLOT.header)],2),e._v(" "),n("div",{class:[e.CLASS.body]},[e._l(e.allFieldsArray,(function(o,t){return[e.showRow(o)?e._t(e.SLOT.beforeRow,null,{models:e.slotProps(o)}):e._e(),e._v(" "),e.showRow(o)?n("div",{key:t,class:[e.CLASS.row,e.classes.row]},[e._t(e.SLOT.rowStart,null,{models:e.slotProps(o)}),e._v(" "),n("div",{class:[e.CLASS.colContainer]},[e.UTILS.isArr(o)?[e._l(o,(function(o){return[e.showCol(o)?e._t(e.SLOT.beforeCol,null,{models:e.slotProps(o)}):e._e(),e._v(" "),e.showCol(o)?n("div",{key:o.model,class:[e.CLASS.col,o.model,e.classes.col]},[e._t(e.SLOT.beforeComponent(o.model)),e._v(" "),n(e.componentName(o),e._g(e._b({tag:"component",model:{value:e.fields[o.model],callback:function(n){e.$set(e.fields,o.model,n)},expression:"fields[subConf.model]"}},"component",e.componentProps(o,{field:!0}),!1),e.componentEvents(o)),[e._t(o.model)],2),e._v(" "),e._t(e.SLOT.afterComponent(o.model))],2):e._e(),e._v(" "),e.showCol(o)?e._t(e.SLOT.afterCol,null,{models:e.slotProps(o)}):e._e()]}))]:[e.showCol(o)?e._t(e.SLOT.beforeCol,null,{models:e.slotProps(o)}):e._e(),e._v(" "),e.showCol(o)?n("div",{key:o.model,class:[e.CLASS.col,o.model,e.classes.col]},[e._t(e.SLOT.beforeComponent(o.model)),e._v(" "),n(e.componentName(o),e._g(e._b({tag:"component",model:{value:e.fields[o.model],callback:function(n){e.$set(e.fields,o.model,n)},expression:"fields[conf.model]"}},"component",e.componentProps(o,{field:!0}),!1),e.componentEvents(o)),[e._t(o.model)],2),e._v(" "),e._t(e.SLOT.afterComponent(o.model))],2):e._e(),e._v(" "),e.showCol(o)?e._t(e.SLOT.afterCol,null,{models:e.slotProps(o)}):e._e()]],2),e._v(" "),e._t(e.SLOT.rowEnd,null,{models:e.slotProps(o)})],2):e._e(),e._v(" "),e.showRow(o)?e._t(e.SLOT.afterRow,null,{models:e.slotProps(o)}):e._e()]}))],2),e._v(" "),n("div",{class:e.CLASS.footer},[e._t(e.SLOT.footer)],2)])},staticRenderFns:[]},void 0,{mixins:[d],emits:["input"],data:function(){var e,o,n=this,t={},r={},i=function(e){var o,i,l,s;t[e]=(null===(o=n.value)||void 0===o||null===(i=o[h])||void 0===i?void 0:i[e])||"",r[e]=(null===(l=n.value)||void 0===l||null===(s=l[p])||void 0===s?void 0:s[e])||""},l=a(this.schema[m]);try{for(l.s();!(o=l.n()).done;){var s=o.value;if(c.isArr(s)){var u,d=a(s);try{for(d.s();!(u=d.n()).done;){i(u.value.model)}}catch(e){d.e(e)}finally{d.f()}break}i(s.model)}}catch(e){l.e(e)}finally{l.f()}return{form:null===(e=this.value)||void 0===e?void 0:e.form,fields:t,errors:r,submit:!1}},computed:{SLOT:function(){return v},CLASS:function(){return f},UTILS:function(){return c},globalAv:function(){return this.activeValidation||!1},allFieldsArray:function(){var e;return c.isArr(null===(e=this.schema)||void 0===e?void 0:e[m])?this.schema[m]:[]},allFieldsFlatObj:function(){var e,o={},n=a(this.allFieldsArray);try{for(n.s();!(e=n.n()).done;){var t=e.value;if(c.isArr(t)){var r,i=a(t);try{for(i.s();!(r=i.n()).done;){var l=r.value;o[l.model]=l}}catch(e){i.e(e)}finally{i.f()}break}o[t.model]=t}}catch(e){n.e(e)}finally{n.f()}return o}},watch:{disabled:{handler:function(){this.removeAllErrors()}},value:{handler:function(){for(var e in null===(o=this.value)||void 0===o?void 0:o[h]){var o,n,t,r,i;this.fields[e]=null===(n=this.value)||void 0===n||null===(t=n[h])||void 0===t?void 0:t[e],this.errors[e]=null===(r=this.value)||void 0===r||null===(i=r[p])||void 0===i?void 0:i[e]}},deep:!0},fields:{handler:function(){this.emitData()},deep:!0,immediate:!0}},created:function(){var e=this,n=function(n){var t=e.fieldConf(n);e.$watch("fields.".concat(n),(function(n,r){e.typeCoercion(t),n==r&&o(n)!==o(r)||e.validateField(t)}),{deep:!0})};for(var t in this.fields)n(t)},methods:{logger:function(e){var o;this.logs&&(o=console).log.apply(o,l(e))},emitData:function(){var e;this.$emit("input",(t(e={form:this.form},h,i({},this.fields)),t(e,p,i({},this.errors)),e))},resetForm:function(){this.submit=!1},schemaValid:function(){var e,o,n;return c.isArr(null===(e=this.schema)||void 0===e?void 0:e[m])&&(null===(o=this.schema)||void 0===o||null===(n=o[m])||void 0===n?void 0:n.length)},showRow:function(e){return c.isArr(e)?this.showCols(e):this.showCol(e)},showCols:function(e){var o=this;return e.length&&e.some((function(e){return o.showCol(e)}))},showCol:function(e){return this.componentName(e)&&!this.fieldHidden(e)},slotProps:function(e){return c.isArr(e)?e.map((function(e){return e.model})):[e.model]},componentProps:function(e){var o,n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.form,l=t.field,s=this.componentName(e,t),u=this.componentData(s),a=i(i({},null==e?void 0:e.vBind),{},{disabled:Boolean(this.disabled||(null==e?void 0:e.disabled))});r&&(a.is=(null==e||null===(o=e.vBind)||void 0===o?void 0:o.is)||"form");l&&((null==u?void 0:u.errorProp)&&(a[u.errorProp]=this.errors[e.model]),a.type=(null==e||null===(n=e.vBind)||void 0===n?void 0:n.type)||_.text);return a},removeAllErrors:function(){for(var e in this.errors)this.errors[e]=""},setError:function(e,o,n){c.isBool(o)&&o||!c.isBool(o)&&!o?this.errors[e]=n:this.errors[e]=o},componentData:function(e){return this.components.find((function(o){return(null==o?void 0:o.name)===e}))},typeCoercion:function(e){var o;Number.isNaN(Number(this.fields[e.model]))&&(null==e||null===(o=e.vBind)||void 0===o?void 0:o.type)===_.number&&this.fields[e.model]&&(this.fields[e.model]=Number(this.fields[e.model]))},componentEvents:function(e){var o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.form,r=(null==e?void 0:e[y])||{};t&&(r.submit=(null==e||null===(o=e.vOn)||void 0===o?void 0:o.submit)||this.handleSubmit);return r},componentName:function(e){var o,n;if(null==e||null===(o=e.vBind)||void 0===o?void 0:o.is)return null==e||null===(n=e.vBind)||void 0===n?void 0:n.is;var t=this.components.find((function(o){var n;return o.types.includes(null==e||null===(n=e.vBind)||void 0===n?void 0:n.type)}));return null==t?void 0:t.name},fieldConf:function(e){return this.allFieldsFlatObj[e]},fieldHidden:function(e){var o;return!(!(null==e?void 0:e.vBind)||!(S.hidden in e.vBind))&&(null===(o=e.vBind)||void 0===o?void 0:o[S.hidden])},runFieldRules:function(e,o,n){var t;if(c.isArr(o)){var r,i=a(o);try{for(i.s();!(r=i.n()).done;){var l=r.value;if(t=l,c.isFunc(l)&&(t=c.handleFunc(l,n)),c.isStr(t))break}}catch(e){i.e(e)}finally{i.f()}}return c.isStr(t)?t:e},validateField:function(e){var o=this.submit||(null==e?void 0:e[b])||this.globalAv?this.runFieldRules("",null==e?void 0:e[w],this.fields[e.model]):"";return this.setError(e.model,o,""),o},validateForm:function(){var e={};for(var o in this.allFieldsFlatObj){var n=this.allFieldsFlatObj[o],t=this.validateField(n);e[n.model]={validationSuccess:!t,schema:n}}var r=Object.keys(e).find((function(o){return!e[o].validationSuccess}));return{fieldsStatus:e,submitFail:r}},handleSubmit:function(e){var o,t=this;return(o=regeneratorRuntime.mark((function o(){var n,r,i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),t.submit=!0,n=t.validateForm(),r=n.fieldsStatus,i=n.submitFail,t.logger(["[SUBMIT ".concat(i?"FAIL":"SUCCESS","]"),r]),!i){o.next=10;break}if(t.resetForm(),!c.isFunc(t.onSubmitFail)){o.next=9;break}return o.next=9,t.onSubmitFail();case 9:return o.abrupt("return");case 10:if(!c.isFunc(t.onSubmit)){o.next=14;break}return o.next=13,t.onSubmit();case 13:t.resetForm();case 14:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var l=o.apply(e,t);function s(e){n(l,r,i,s,u,"next",e)}function u(e){n(l,r,i,s,u,"throw",e)}s(void 0)}))})()}}},void 0,!1,void 0,!1,void 0,void 0,void 0),C=function(e){C.installed||(C.installed=!0,e.component("FormGeneratorVue",g))},A={install:C},F=null;return"undefined"!=typeof window?F=window.Vue:"undefined"!=typeof global&&(F=global.Vue),F&&F.use(A),g.install=C,e.default=g,e}({});