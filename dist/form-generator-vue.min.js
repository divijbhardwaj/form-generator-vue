var FormGeneratorVue=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,n,r,i,o,s){try{var a=e[o](s),f=a.value}catch(e){return void n(e)}a.done?t(f):Promise.resolve(f).then(r,i)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){throw new Error(e)}var c=function(e,t,n,r,i,o){var s=function(e){return""===String(e).trim()?"FIELD_IS_EMPTY":""}(t),a=r.COMMON_VALIDATORS,f=!(!a||!Object.keys(a).length),l=r[e]||r[n.type]||void 0;if("FIELD_IS_EMPTY"!==s){if(f)for(var c in a)"function"!=typeof a[c]&&u("".concat(c," is not a function.")),void 0===(s=a[c](t))&&u("".concat(c," must return a string, empty incase of success and error message if field is invalid."));return d("function"!=typeof l?s:s=l(t,n,i))}return d(s=o?"Required":"")};function d(e){return""!==e?[!1,e]:[!0,""]}function m(e,t,n,r,i,o,s,a,f,l){"boolean"!=typeof s&&(f=a,a=s,s=!1);const u="function"==typeof n?n.options:n;let c;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),r&&(u._scopeId=r),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,f(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=c):t&&(c=s?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),c)if(u.functional){const e=u.render;u.render=function(t,n){return c.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,c):[c]}return n}var p=m({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasFieldsConfig?n("form",{staticClass:"generated-form",on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[n("div",{staticClass:"generated-form__header"},[e._t("header")],2),e._v(" "),e.formEditable?n("div",{staticClass:"generated-form__body"},[e._l(e.fieldsConfig,(function(t){return[e._t("sectionLabel",null,{fieldConfig:t,fieldsConfigFlat:e.fieldsConfig_FLAT}),e._v(" "),n("div",e._b({key:t.name,staticClass:"generated-form__body__row"},"div",{class:e.classes.row},!1),[Array.isArray(t)?[e._l(t,(function(t){return[e.fieldVisible(t)?n("div",e._b({key:t.name,staticClass:"generated-form__body__row__col",class:"col-"+t.name},"div",{class:e.classes.col},!1),[[e._t(t.name+"_before"),e._v(" "),e.hasCustomComponent(t)?n(e.computedComponent(t),e._g(e._b({key:t.name,ref:t.name,refInFor:!0,tag:"component",attrs:{type:t.type||"text"},model:{value:e.fields[t.name],callback:function(n){e.$set(e.fields,t.name,"string"==typeof n?n.trim():n)},expression:"fields[subFieldConfig.name]"}},"component",e.bindProps(t),!1),e.bindEvents(t))):e._e(),e._v(" "),e._t(t.name+"_after")]],2):e._e()]}))]:[e.fieldVisible(t)?n("div",e._b({staticClass:"generated-form__body__row__col",class:"col-"+t.name},"div",{class:e.classes.col},!1),[[e._t(t.name+"_before"),e._v(" "),e.hasCustomComponent(t)?n(e.computedComponent(t),e._g(e._b({key:t.name,ref:t.name,refInFor:!0,tag:"component",attrs:{type:t.type||"text"},model:{value:e.fields[t.name],callback:function(n){e.$set(e.fields,t.name,"string"==typeof n?n.trim():n)},expression:"fields[fieldConfig.name]"}},"component",e.bindProps(t),!1),e.bindEvents(t))):e._e(),e._v(" "),e._t(t.name+"_after")]],2):e._e()]],2)]}))],2):e._e(),e._v(" "),e.formEditable?e._e():e._t("disabled",null,{fieldsConfigFlat:e.fieldsConfig_FLAT}),e._v(" "),e._t("agreement"),e._v(" "),e._t("actions"),e._v(" "),n("div",{staticClass:"generated-form__footer"},[e._t("footer")],2)],2):e._e()},staticRenderFns:[]},void 0,{props:{submitHandler:{type:Function,required:!1,default:function(){console.log(this.fields),alert("submit handler not present")}},formRules:{type:Object,required:!1,default:function(){return{}}},customComponentsMap:{type:Array,required:!1,default:function(){return[]}},formEditable:{type:Boolean,required:!1,default:!0},validationConfig:{type:Object,required:!1,default:function(){return{}}},formConfig:{type:Object,default:function(){return{}}},classes:{type:Object,required:!1,default:function(){return{}}}},data:function(){var e={},t={};function n(n){e=o(o({},e),{},r({},n.name,"value"in n?n.value:"")),t=o(o({},t),{},r({},n.name,""))}return"fields"in this.formConfig&&this.formConfig.fields.forEach((function(e){Array.isArray(e)?e.forEach((function(e){n(e)})):n(e)})),{fields:e,errors:t,loading:!1,submit:!1}},computed:{formHelper:function(){return"_formHelper"},hasCustomComponentsMap:function(){return Boolean(this.customComponentsMap.length)},activeValidation:function(){return"activeValidation"in this.formConfig&&this.formConfig.activeValidation},fieldsConfig:function(){return this.formConfig.fields},fieldsConfig_FLAT:function(){var e=[];return this.fieldsConfig.forEach((function(t){e=Array.isArray(t)?[].concat(a(e),a(t)):[].concat(a(e),[t])})),e},hasFieldsConfig:function(){return this.fieldsConfig&&Boolean(this.fieldsConfig.length)},defaultFieldComponents:function(){return[]}},watch:{formEditable:{handler:function(e){!e&&this.removeAllErrors()}}},created:function(){this.$emit("setFormContext",this)},mounted:function(){var e=this;Object.keys(this.fields).forEach((function(n){e.$watch("fields.".concat(n),(function(e,r){this.convertToNumber(n),e==r&&t(e)!==t(r)||(this.fieldHelpers(n,e),this.validateField(n))}))}))},methods:{resetForm:function(){this.submit=!1,this.loading=!1},removeAllErrors:function(){var e=this;Object.keys(this.errors).forEach((function(t){e.errors[t]=""}))},showErrors:function(e,t){this.errors[e]=t},fieldIsHelper:function(e){return e.includes(this.formHelper)},fieldHelpers:function(e,t){var n=t;if(this.fieldIsHelper(e)){var r=e.split(this.formHelper)[0];r in this.fields&&(this.fields[r]=n)}else if("".concat(e).concat(this.formHelper)in this.fields){var i="".concat(e).concat(this.formHelper);this.fields[i]=n}},setDefaultFieldValue:function(e){this.fields[e.name]="value"in e?e.value:""},fieldVisible:function(e){var t=!("show"in e)||e.show(this);return!t&&this.setDefaultFieldValue(e),t},bindProps:function(e){return o(o({name:e.name},e.props),{},{errorMsg:this.errors[e.name],error:this.errors[e.name],disabled:this.fieldDisabled(e)})},findFieldConfig:function(e){return this.fieldsConfig_FLAT.find((function(t){return t.name===e}))},convertToNumber:function(e){var t=this.findFieldConfig(e);t&&"number"===t.type&&this.fields[e]&&(this.fields[e]=Number(this.fields[e]))},bindEvents:function(e){var t={};return"triggers"in e?t=e.triggers(this):t},hasCustomComponent:function(e){var t=e.type||"text";return"component"in e||this.findCustomComponentByType(t)},findCustomComponentByType:function(e){return this.hasCustomComponentsMap?this.customComponentsMap.find((function(t){return t.type.includes(e)})):void 0},computedComponent:function(e){var t=e.type||"text",n=this.findDefaultComponent(t);if("component"in e)return e.component;var r=this.findCustomComponentByType(t);return r?r.name:n},findDefaultComponent:function(){return"default component"},fieldDisabled:function(e){var t=!(!e.props||!("disabled"in e.props))&&e.props.disabled;return!(this.formEditable&&!t)},fieldRequired:function(e){var t=this.findFieldConfig(e);return!(!t||this.fieldDisabled(t)||!this.fieldVisible(t))&&(this.fieldIsHelper(e)?"required"in t&&t.required:!("required"in t)||t.required)},validateField:function(e){var t=this.fieldRequired(e),n=[!0,""],r=this.findFieldConfig(e).rules||{},i=s(t&&(this.submit||this.activeValidation)?c(e,this.fields[e],r,this.formRules,o({},this.fields),this.submit):n,2),a=i[0],f=i[1];return this.showErrors(e,f),a},submitForm:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t.loading=!0,t.submit=!0,Object.keys(t.fields).forEach((function(e){n.push(t.validateField(e))})),!n.includes(!1)){e.next=9;break}return console.log("Form not valid"),t.resetForm(),e.abrupt("return");case 9:return console.log("Form valid, calling submit handler"),e.next=12,t.submitHandler(t.fields);case 12:t.resetForm();case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,f,"next",e)}function f(e){n(s,i,o,a,f,"throw",e)}a(void 0)}))})()}}},"data-v-a1d31312",!1,void 0,!1,void 0,void 0,void 0),h=function(e){h.installed||(h.installed=!0,e.component("FormGeneratorVue",p))},b={install:h},v=null;return"undefined"!=typeof window?v=window.Vue:"undefined"!=typeof global&&(v=global.Vue),v&&v.use(b),p.install=h,e.default=p,e}({});